import{z as e,y as a,x as l,bg as o,X as s,Y as t,d as r,A as u,B as i,a6 as d,r as n,w as c,ae as m,C as p,ao as f,c as b,g as v,a as h,l as _,h as g,k as x,E as y,M as w,m as k,D as C,v as $,t as V,G as S,bh as j,ak as T,s as W,H as E,R as I,T as q,b as B,e as H,f as L,j as A,ay as D,b0 as P}from"./index-CbP45Wwt.js";import{_ as U}from"./index.Btqrcc5g.js";import{u as z,F,_ as K}from"./wd-input.BHaKXBII.js";import{_ as M}from"./wd-picker.Su60wahG.js";import{u as G}from"./useTranslate.BahM4N0k.js";import{a as O}from"./wd-cell-group.OB_X9OU7.js";import{_ as J}from"./wd-form.vue_vue_type_script_setup_true_lang.DscUGWD7.js";import{_ as N}from"./wd-checkbox.4avEtivn.js";import{_ as R}from"./wd-button.VA8QVjvr.js";import"./types.DuL_ynPZ.js";import"./index.CDE1r9Ff.js";import"./index.D9GroqTO.js";import"./wd-popup.C0DdTWGY.js";const X=W(r({name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,customTextareaContainerClass:a(""),customTextareaClass:a(""),customLabelClass:a(""),modelValue:t(""),placeholder:String,placeholderStyle:String,placeholderClass:a(""),disabled:l(!1),maxlength:s(-1),autoFocus:l(!1),focus:l(!1),autoHeight:l(!1),fixed:l(!1),cursorSpacing:s(0),cursor:s(-1),confirmType:String,confirmHold:l(!1),showConfirmBar:l(!0),selectionStart:s(-1),selectionEnd:s(-1),adjustPosition:l(!0),disableDefaultPadding:l(!1),holdKeyboard:l(!1),showPassword:l(!1),clearable:l(!1),readonly:l(!1),prefixIcon:String,showWordLimit:l(!1),label:String,labelWidth:a(""),size:String,error:l(!1),center:l(!1),noBorder:l(!1),required:l(!1),prop:a(""),rules:o(),clearTrigger:a("always"),focusWhenClear:l(!0),ignoreCompositionEvent:l(!0),inputmode:a("text"),markerSide:a("before")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:a}){const{translate:l}=G("textarea"),o=e,s=a,t=u(),r=i(()=>d(o.placeholder)?o.placeholder:l("placeholder")),W=n(!1),E=n(!1),I=n(!1),q=n(""),B=z();c(()=>o.focus,e=>{E.value=e},{immediate:!0,deep:!0}),c(()=>o.modelValue,e=>{q.value=d(e)?String(e):""},{immediate:!0,deep:!0});const{parent:H}=m(F),L=i(()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:s}=o;return!(!l||a||e||!q.value||!("always"===s||"focus"===o.clearTrigger&&I.value))}),A=i(()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:s}=o;return Boolean(!e&&!a&&d(l)&&l>-1&&s)}),D=i(()=>H&&o.prop&&H.errorMessages&&H.errorMessages[o.prop]?H.errorMessages[o.prop]:""),P=i(()=>{let e=!1;if(H&&H.props.rules){const a=H.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===o.prop&&Array.isArray(a[l])&&(e=a[l].some(e=>e.required))}return o.required||o.rules.some(e=>e.required)||e}),U=i(()=>Array.from(String(N(o.modelValue))).length),K=i(()=>`wd-textarea   ${o.label||t.label?"is-cell":""} ${o.center?"is-center":""} ${B.border.value?"is-border":""} ${o.size?"is-"+o.size:""} ${o.error?"is-error":""} ${o.disabled?"is-disabled":""} ${o.autoHeight?"is-auto-height":""} ${U.value>0?"is-not-empty":""}  ${o.noBorder?"is-no-border":""} ${o.customClass}`);i(()=>`wd-textarea__label ${o.customLabelClass}`);const M=i(()=>`wd-textarea__placeholder  ${o.placeholderClass}`),O=i(()=>`${U.value>0?"wd-textarea__count-current":""} ${U.value>o.maxlength?"is-error":""}`),J=i(()=>o.labelWidth?p({"min-width":o.labelWidth,"max-width":o.labelWidth}):"");function N(e){if(null==e)return"";const{maxlength:a,showWordLimit:l}=o;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}async function R(){I.value=!1,q.value="",o.focusWhenClear&&(W.value=!0,E.value=!1),await T(),o.focusWhenClear&&(E.value=!0,I.value=!0),s("update:modelValue",q.value),s("clear")}async function X({detail:e}){await T(150),W.value?W.value=!1:(I.value=!1,s("blur",{value:q.value,cursor:e.cursor?e.cursor:null}))}function Y({detail:e}){I.value=!0,s("focus",e)}function Q({detail:e}){q.value=N(q.value),s("update:modelValue",q.value),s("input",e)}function Z({detail:e}){s("keyboardheightchange",e)}function ee({detail:e}){s("confirm",e)}function ae({detail:e}){s("linechange",e)}function le(){s("clickprefixicon")}return f(()=>{q.value=N(q.value),s("update:modelValue",q.value)}),(e,a)=>{const l=w,s=x,t=j;return v(),b(s,{class:S(K.value),style:y(e.customStyle)},{default:h(()=>[e.label||e.$slots.label?(v(),b(s,{key:0,class:"wd-textarea__label",style:y(J.value)},{default:h(()=>[P.value&&"before"===e.markerSide?(v(),b(l,{key:0,class:"wd-textarea__required wd-textarea__required--left"},{default:h(()=>[k("*")]),_:1})):_("",!0),e.prefixIcon||e.$slots.prefix?(v(),b(s,{key:1,class:"wd-textarea__prefix"},{default:h(()=>[e.prefixIcon&&!e.$slots.prefix?(v(),b($,{key:0,"custom-class":"wd-textarea__icon",name:e.prefixIcon,onClick:le},null,8,["name"])):C(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):_("",!0),g(s,{class:"wd-textarea__label-inner"},{default:h(()=>[e.label&&!e.$slots.label?(v(),b(l,{key:0},{default:h(()=>[k(V(e.label),1)]),_:1})):e.$slots.label?C(e.$slots,"label",{key:1},void 0,!0):_("",!0)]),_:3}),P.value&&"after"===e.markerSide?(v(),b(l,{key:2,class:"wd-textarea__required"},{default:h(()=>[k("*")]),_:1})):_("",!0)]),_:3},8,["style"])):_("",!0),g(s,{class:S(`wd-textarea__value ${L.value?"is-suffix":""} ${e.customTextareaContainerClass} ${A.value?"is-show-limit":""}`)},{default:h(()=>[g(t,{class:S(`wd-textarea__inner ${e.customTextareaClass}`),modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),"show-count":!1,placeholder:r.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:E.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":M.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:Q,onFocus:Y,onBlur:X,onConfirm:ee,onLinechange:ae,onKeyboardheightchange:Z},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),D.value?(v(),b(s,{key:0,class:"wd-textarea__error-message"},{default:h(()=>[k(V(D.value),1)]),_:1})):_("",!0),o.readonly?(v(),b(s,{key:1,class:"wd-textarea__readonly-mask"})):_("",!0),g(s,{class:"wd-textarea__suffix"},{default:h(()=>[L.value?(v(),b($,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:R})):_("",!0),A.value?(v(),b(s,{key:1,class:"wd-textarea__count"},{default:h(()=>[g(l,{class:S(O.value)},{default:h(()=>[k(V(U.value),1)]),_:1},8,["class"]),k(" /"+V(e.maxlength),1)]),_:1})):_("",!0)]),_:1})]),_:1},8,["class"])]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-af9fdbe5"]]),Y=r({__name:"edit",setup(e){const a=E(),l=n(!0),o=n({}),s=n([]),t=n({nickname:"",mobile:"",region:"",address:"",region_ids:[],is_default:!1}),r=(e,a,l,s)=>{const t=a[l];0===l?(e.setColumnData(1,o.value[t.value]),e.setColumnData(2,o.value[o.value[t.value][0].value])):1===l&&e.setColumnData(2,o.value[t.value]),s()},u=({value:e})=>{t.value.region_ids=e},i=()=>{const e=D("wxAddress");e&&console.log(JSON.parse(e))},d=()=>{a.show("保存成功"),setTimeout(()=>{P()},1e3)};return I(e=>{try{const a=parseInt((null==e?void 0:e.id)||"0");a?(q({title:"编辑地址"}),(e=>{setTimeout(()=>{t.value={id:e,nickname:"张三",mobile:"13800138000",region:"广东省 广州市 白云区",address:"人和镇凤岗路建设大道九州创意园1号楼205室",region_ids:["110000","110100","110102"],is_default:!1}},500)})(a)):q({title:"添加地址"}),(()=>{const e={0:[{label:"北京",value:"110000"},{label:"广东省",value:"440000"}],11e4:[{label:"北京",value:"110100"}],44e4:[{label:"广州市",value:"440100"},{label:"韶关市",value:"440200"},{label:"深圳市",value:"440300"},{label:"珠海市",value:"440400"},{label:"汕头市",value:"440500"}],110100:[{label:"东城区",value:"110101"},{label:"西城区",value:"110102"},{label:"朝阳区",value:"110105"},{label:"丰台区",value:"110106"},{label:"石景山区",value:"110107"}],440100:[{label:"荔湾区",value:"440103"},{label:"越秀区",value:"440104"},{label:"海珠区",value:"440105"}],440200:[{label:"武江区",value:"440203"}],440300:[{label:"罗湖区",value:"440303"},{label:"福田区",value:"440304"}],440400:[{label:"香洲区",value:"440402"},{label:"斗门区",value:"440403"},{label:"金湾区",value:"440404"}],440500:[{label:"龙湖区",value:"440507"},{label:"金平区",value:"440511"}]};o.value=e,s.value=[e[0],e[e[0][0].value],e[e[e[0][0].value][0].value]]})()}finally{setTimeout(()=>{l.value=!1},500)}}),(e,a)=>{const o=H(L("w-loading"),U),n=H(L("wd-input"),K),c=H(L("wd-picker"),M),m=H(L("wd-textarea"),X),p=H(L("wd-cell-group"),O),f=H(L("wd-form"),J),y=w,C=H(L("wd-checkbox"),N),$=x,V=H(L("wd-button"),R),S=B("global-ku-root");return v(),b(S,null,{default:h(()=>[A(l)?(v(),b(o,{key:0})):_("",!0),g($,{class:"pt-1"},{default:h(()=>[g(f,{ref:"form",model:A(t)},{default:h(()=>[g(p,{border:""},{default:h(()=>[g(n,{modelValue:A(t).nickname,"onUpdate:modelValue":a[0]||(a[0]=e=>A(t).nickname=e),prop:"nickname",label:"姓名","label-width":"130rpx",placeholder:"请填写姓名"},null,8,["modelValue"]),g(n,{modelValue:A(t).mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>A(t).mobile=e),prop:"mobile",label:"联系电话","label-width":"130rpx",placeholder:"请填写联系电话"},null,8,["modelValue"]),g(c,{modelValue:A(t).region_ids,"onUpdate:modelValue":a[2]||(a[2]=e=>A(t).region_ids=e),columns:A(s),label:"所在地区","label-width":"130rpx","column-change":r,onConfirm:u},null,8,["modelValue","columns"]),g(m,{modelValue:A(t).address,"onUpdate:modelValue":a[3]||(a[3]=e=>A(t).address=e),prop:"address",label:"详细地址","label-width":"130rpx",placeholder:"小区、门牌号",style:{height:"180rpx"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),g($,{class:"mt-2 p-3 bg-page"},{default:h(()=>[g(C,{modelValue:A(t).is_default,"onUpdate:modelValue":a[4]||(a[4]=e=>A(t).is_default=e)},{default:h(()=>[g(y,{class:"text-sm"},{default:h(()=>[k("设为默认地址")]),_:1})]),_:1},8,["modelValue"])]),_:1}),g($,{class:"p-3 pt-5"},{default:h(()=>[g($,null,{default:h(()=>[g(V,{type:"primary",block:!0,onClick:d},{default:h(()=>[k(" 确认 ")]),_:1})]),_:1}),g($,{class:"mt-4"},{default:h(()=>[g(V,{type:"primary",block:!0,plain:!0,onClick:i},{default:h(()=>[k(" 导入微信地址 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Y as default};
