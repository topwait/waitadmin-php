import{d as a,H as e,I as t,r as s,J as l,B as o,w as r,c as u,a as n,b as d,e as c,f as p,g as i,h as m,k as f,j as _,G as b,l as g,m as v,t as x,U as h,b0 as w,s as y}from"./index-CbP45Wwt.js";import{_ as j}from"./wd-input.BHaKXBII.js";import{_ as k}from"./wd-button.VA8QVjvr.js";import{_ as I}from"./wd-form.vue_vue_type_script_setup_true_lang.DscUGWD7.js";import"./types.DuL_ynPZ.js";import"./index.CDE1r9Ff.js";import"./index.D9GroqTO.js";import"./useTranslate.BahM4N0k.js";const z=y(a({__name:"change_account",setup(a){const y=e(),z=t(),T=s(!1),U=l({account:z.userInfo.account||""}),V=s(!1),A=s(""),B=o(()=>T.value||!!A.value||!U.account),C=async()=>{const a=z.userInfo.account;if(U.account===a)return y.show("与原账号一致,无需修改"),!1;T.value=!0,await h.edit({scene:"account",value:U.account}).then(async()=>{y.show("修改成功"),await z.getUser(),setTimeout(()=>{w()},500)}).catch(()=>{}).finally(()=>{setTimeout(()=>{T.value=!1},800)})};return r(()=>U.account,a=>{a?/^[a-zA-Z0-9]+$/.test(a)?a.length<=1||a.length>20?A.value="账号长度不合法，应为2-20个字符":A.value="":A.value="账号只能包含字母或数字":A.value="账号不能为空"}),(a,e)=>{const t=c(p("wd-input"),j),s=f,l=c(p("wd-button"),k),o=c(p("wd-form"),I),r=d("global-ku-root");return i(),u(r,null,{default:n(()=>[m(s,{class:"flex-1 p-6 pt-10 border-t border-br-thinned bg-page"},{default:n(()=>[m(o,{ref:"form",model:_(U),class:"w-full"},{default:n(()=>[m(s,{class:b(["p-3.5 rounded-xl bg-lighter border-2",_(A)?"border-danger":_(V)?"border-primary":"border-transparent"])},{default:n(()=>[m(t,{modelValue:_(U).account,"onUpdate:modelValue":e[0]||(e[0]=a=>_(U).account=a),disabled:_(T),"no-border":!0,prop:"nickname",type:"text",placeholder:"请输入账号","custom-class":"!bg-transparent",onFocus:e[1]||(e[1]=a=>V.value=!0),onBlur:e[2]||(e[2]=a=>V.value=!1)},null,8,["modelValue","disabled"])]),_:1},8,["class"]),m(s,{class:"pt-2 pl-3 text-sm text-danger h-4.5"},{default:n(()=>[_(A)?(i(),u(s,{key:0},{default:n(()=>[v(x(_(A)),1)]),_:1})):g("",!0)]),_:1}),m(s,{class:"mt-8 px-2 text-sm text-tx-placeholder"},{default:n(()=>[v(" 账号只能包含字母或数字，并且长度2~20个字符内容。 ")]),_:1}),m(s,{class:"mt-4"},{default:n(()=>[m(l,{type:"primary",size:"large",block:!0,loading:_(T),disabled:_(B),onClick:C},{default:n(()=>[v(" 确定 ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-2ddf3ca0"]]);export{z as default};
