import{d as t,G as e,H as s,r as a,P as o,M as i,c as u,a as n,b as r,e as p,J as l,f as d,Q as c,g as _,h as m,k as g,m as x,t as j,j as w}from"./index-4glTkX_N.js";import"./types.DQ6PHZfF.js";import"./index.mNFG9pMF.js";import"./index.D9GroqTO.js";import{w as f,_ as v}from"./login-wechat.vue_vue_type_script_setup_true_lang.D92VkLrx.js";import"./wd-button.Bm4eyLOH.js";import"./wd-form.vue_vue_type_script_setup_true_lang.7ThkrgxC.js";import"./wd-input.DYf8A7Ki.js";import"./useTranslate.By_X5Fzm.js";import"./notice.CpGJXdHh.js";import"./wd-popup.DsWtaoA5.js";import"./auth-protocol.vue_vue_type_script_setup_true_lang.bXm3GJ4o.js";import"./wd-checkbox.Be-UkwSr.js";const y=t({__name:"oauth",setup(t){const y=e(),h=s(),b=a(!1),k=a(""),T=a("正在登录中...");return o(async t=>{if(!h.isLogin)return(null==t?void 0:t.code)&&(null==t?void 0:t.state)?void(await(async(t,e)=>{t&&e&&f.authLogin(t,e).then(async t=>{1===t.code?(T.value="请完成手机号绑定...",k.value=t.data.sign,b.value=!0):(await h.login(t.token),y.show("登录成功"),setTimeout(()=>{i({url:"/pages/user/index"})},1e3))})})(t.code,t.state)):(y.error("授权异常，为您跳转首页~"),setTimeout(()=>{i({url:"/pages/index/index"})},1500));await i({url:"/pages/index/index"})}),(t,e)=>{const s=p(d("wd-toast"),l),a=p(d("wd-loading"),c),o=g,i=r("global-ku-root");return _(),u(i,null,{default:n(()=>[m(s),m(o,{class:"flex-1 flex items-center justify-center bg-page"},{default:n(()=>[m(o,{class:"text-center"},{default:n(()=>[m(a,{type:"outline",size:"100rpx"}),m(o,{class:"mt-3 text-tx-secondary"},{default:n(()=>[x(j(w(T)),1)]),_:1})]),_:1}),m(v,{scene:"bind","show-popup":w(b),sign:w(k)},null,8,["show-popup","sign"])]),_:1})]),_:1})}}});export{y as default};
