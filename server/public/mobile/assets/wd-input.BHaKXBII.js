import{ae as e,B as l,x as a,bx as s,z as o,y as r,bg as t,Y as n,X as i,d as u,A as c,r as d,w as p,a6 as f,C as m,bo as y,c as h,g,k as _,E as v,G as b,a as w,l as x,h as k,M as S,m as C,D as $,v as I,t as V,aK as j,ak as E,s as W}from"./index-CbP45Wwt.js";import{C as q}from"./types.DuL_ynPZ.js";import{u as P}from"./useTranslate.BahM4N0k.js";function T(){const{parent:a,index:s}=e(q);return{border:l(()=>a&&a.props.border&&s.value)}}const z=Symbol("wd-form"),B={...o,model:s(Object),rules:{type:Object,default:()=>({})},resetOnChange:a(!0),errorType:{type:String,default:"message"}},O=W(u({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...o,customInputClass:r(""),customLabelClass:r(""),placeholder:String,placeholderStyle:String,placeholderClass:r(""),cursorSpacing:i(0),cursor:i(-1),selectionStart:i(-1),selectionEnd:i(-1),adjustPosition:a(!0),holdKeyboard:a(!1),confirmType:r("done"),confirmHold:a(!1),focus:a(!1),type:r("text"),maxlength:{type:Number,default:-1},disabled:a(!1),alwaysEmbed:a(!1),alignRight:a(!1),modelValue:n(""),showPassword:a(!1),clearable:a(!1),readonly:a(!1),prefixIcon:String,suffixIcon:String,showWordLimit:a(!1),label:String,labelWidth:r(""),size:String,error:a(!1),center:a(!1),noBorder:a(!1),required:a(!1),prop:String,rules:t(),clearTrigger:r("always"),focusWhenClear:a(!0),ignoreCompositionEvent:a(!0),inputmode:r("text"),markerSide:r("before")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(a,{emit:s}){const o=a,r=s,t=c(),{translate:n}=P("input"),i=d(!1),u=d(!1),W=d(!1),q=d(!1),B=d(function(){const e=function(e){const{maxlength:l}=o;if(f(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(o.modelValue);l=e,a=o.modelValue,y(String(l),String(a))||r("update:modelValue",e);var l,a;return e}()),O=T();p(()=>o.focus,e=>{W.value=e},{immediate:!0,deep:!0}),p(()=>o.modelValue,e=>{B.value=f(e)?String(e):""});const{parent:K}=e(z),L=l(()=>f(o.placeholder)?o.placeholder:n("placeholder")),M=l(()=>{const{disabled:e,readonly:l,clearable:a,clearTrigger:s}=o;return!(!a||l||e||!B.value||!("always"===s||"focus"===o.clearTrigger&&q.value))}),A=l(()=>{const{disabled:e,readonly:l,maxlength:a,showWordLimit:s}=o;return Boolean(!e&&!l&&f(a)&&a>-1&&s)}),H=l(()=>K&&o.prop&&K.errorMessages&&K.errorMessages[o.prop]?K.errorMessages[o.prop]:""),F=l(()=>{let e=!1;if(K&&K.props.rules){const l=K.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===o.prop&&Array.isArray(l[a])&&(e=l[a].some(e=>e.required))}return o.required||o.rules.some(e=>e.required)||e}),G=l(()=>`wd-input  ${o.label||t.label?"is-cell":""} ${o.center?"is-center":""} ${O.border.value?"is-border":""} ${o.size?"is-"+o.size:""} ${o.error?"is-error":""} ${o.disabled?"is-disabled":""}  ${B.value&&String(B.value).length>0?"is-not-empty":""}  ${o.noBorder?"is-no-border":""} ${o.customClass}`),R=l(()=>`wd-input__label ${o.customLabelClass}`),D=l(()=>`wd-input__placeholder  ${o.placeholderClass}`),N=l(()=>o.labelWidth?m({"min-width":o.labelWidth,"max-width":o.labelWidth}):"");function U(){i.value=!i.value}async function X(){q.value=!1,B.value="",o.focusWhenClear&&(u.value=!0,W.value=!1),await E(),o.focusWhenClear&&(W.value=!0,q.value=!0),r("update:modelValue",B.value),r("clear")}async function Y(){await E(150),u.value?u.value=!1:(q.value=!1,r("blur",{value:B.value}))}function J({detail:e}){q.value=!0,r("focus",e)}function Q({detail:e}){r("update:modelValue",B.value),r("input",e)}function Z({detail:e}){r("keyboardheightchange",e)}function ee({detail:e}){r("confirm",e)}function le(){r("clicksuffixicon")}function ae(){r("clickprefixicon")}function se(e){r("click",e)}return(e,l)=>{const a=S,s=_,r=j;return g(),h(s,{class:b(G.value),style:v(e.customStyle),onClick:se},{default:w(()=>[e.label||e.$slots.label?(g(),h(s,{key:0,class:b(R.value),style:v(N.value)},{default:w(()=>[F.value&&"before"===e.markerSide?(g(),h(a,{key:0,class:"wd-input__required wd-input__required--left"},{default:w(()=>[C("*")]),_:1})):x("",!0),e.prefixIcon||e.$slots.prefix?(g(),h(s,{key:1,class:"wd-input__prefix"},{default:w(()=>[e.prefixIcon&&!e.$slots.prefix?(g(),h(I,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ae},null,8,["name"])):$(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):x("",!0),k(s,{class:"wd-input__label-inner"},{default:w(()=>[e.label&&!e.$slots.label?(g(),h(a,{key:0},{default:w(()=>[C(V(e.label),1)]),_:1})):e.$slots.label?$(e.$slots,"label",{key:1},void 0,!0):x("",!0)]),_:3}),F.value&&"after"===e.markerSide?(g(),h(a,{key:2,class:"wd-input__required"},{default:w(()=>[C("*")]),_:1})):x("",!0)]),_:3},8,["class","style"])):x("",!0),k(s,{class:"wd-input__body"},{default:w(()=>[k(s,{class:"wd-input__value"},{default:w(()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?x("",!0):(g(),h(s,{key:0,class:"wd-input__prefix"},{default:w(()=>[e.prefixIcon&&!e.$slots.prefix?(g(),h(I,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ae},null,8,["name"])):$(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})),k(r,{class:b(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",A.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!i.value,modelValue:B.value,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value=e),placeholder:L.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:W.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":D.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:Q,onFocus:J,onBlur:Y,onConfirm:ee,onKeyboardheightchange:Z},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),o.readonly?(g(),h(s,{key:1,class:"wd-input__readonly-mask"})):x("",!0),M.value||e.showPassword||e.suffixIcon||A.value||e.$slots.suffix?(g(),h(s,{key:2,class:"wd-input__suffix"},{default:w(()=>[M.value?(g(),h(I,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:X})):x("",!0),e.showPassword?(g(),h(I,{key:1,"custom-class":"wd-input__icon",name:i.value?"view":"eye-close",onClick:U},null,8,["name"])):x("",!0),A.value?(g(),h(s,{key:2,class:"wd-input__count"},{default:w(()=>[k(a,{class:b([B.value&&String(B.value).length>0?"wd-input__count-current":"",String(B.value).length>e.maxlength?"is-error":""])},{default:w(()=>[C(V(String(B.value).length),1)]),_:1},8,["class"]),C(" /"+V(e.maxlength),1)]),_:1})):x("",!0),e.suffixIcon&&!e.$slots.suffix?(g(),h(I,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:le},null,8,["name"])):$(e.$slots,"suffix",{key:4},void 0,!0)]),_:3})):x("",!0)]),_:3}),H.value?(g(),h(s,{key:0,class:"wd-input__error-message"},{default:w(()=>[C(V(H.value),1)]),_:1})):x("",!0)]),_:3})]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-921fb1ee"]]);export{z as F,O as _,B as f,T as u};
