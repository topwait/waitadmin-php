import{x as e,y as l,z as t,d as o,A as s,B as a,C as r,c as u,g as d,a as n,D as c,l as i,E as A,G as g,k as p,s as m,H as f,I as h,r as w,J as x,e as v,K as C,f as b,v as y,n as I,h as _,j as E,L as k,m as B,M as Q,F as j,N as G,O as D,u as V,o as M,b as P,P as O,Q as X,_ as R,t as U}from"./index-CbP45Wwt.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang.E7x_lWMO.js";import{_ as H}from"./close-channel.vue_vue_type_script_setup_true_lang.xCxJBb7L.js";import{_ as J}from"./wd-input.BHaKXBII.js";import{_ as S}from"./wd-button.VA8QVjvr.js";import{_ as N}from"./wd-form.vue_vue_type_script_setup_true_lang.DscUGWD7.js";import"./types.DuL_ynPZ.js";import"./index.CDE1r9Ff.js";import"./index.D9GroqTO.js";import{_ as Y}from"./auth-protocol.vue_vue_type_script_setup_true_lang.DCutcNGz.js";import{_ as K,N as T}from"./notice.4Vk_mI8L.js";import{_ as L}from"./login-wechat.vue_vue_type_script_setup_true_lang.5896Lj9u.js";import"./useTranslate.BahM4N0k.js";import"./wd-checkbox.4avEtivn.js";import"./wd-popup.C0DdTWGY.js";const W=m(o({name:"wd-divider",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...t,color:String,contentPosition:l("center"),dashed:Boolean,vertical:e(!1),hairline:e(!0)},setup(e){const l=e,t=s(),o=a(()=>{const{color:e,customStyle:t}=l,o={};return e&&(o.color=e),`${r(o)}${t}`}),m=a(()=>{const e="wd-divider";return{[e]:!0,"is-dashed":l.dashed,"is-hairline":l.hairline,[`${e}--vertical`]:l.vertical,[`${e}--center`]:!l.vertical&&"center"===l.contentPosition&&!!t.default,[`${e}--left`]:!l.vertical&&"left"===l.contentPosition,[`${e}--right`]:!l.vertical&&"right"===l.contentPosition,[l.customClass]:!!l.customClass}});return(e,l)=>{const t=p;return d(),u(t,{class:g(m.value),style:A(o.value)},{default:n(()=>[e.vertical?i("",!0):c(e.$slots,"default",{key:0},void 0,!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-386d00c9"]]),q=o({__name:"login-account",props:{showProtocol:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0}},setup(e){const l=e,t=f(),o=h(),s=w(!1),r=w(!1),c=x({account:"",password:""}),A=a(()=>!(c.account.trim()&&c.password.trim()&&!r.value)),g=()=>c.account?c.password?l.showProtocol&&!s.value?(t.show("请阅读《服务协议》与《隐私协议》"),!1):(r.value=!0,void G.accountLogin({account:c.account,password:c.password}).then(async e=>{await o.login(e.token),t.show("登录成功"),setTimeout(()=>{D({url:"/pages/user/index"}),r.value=!1},1e3)}).catch(()=>{setTimeout(()=>{r.value=!1},1500)})):(t.show("请输入登录密码"),!1):(t.show("请输入登录账号"),!1);return(l,t)=>{const o=v(b("wd-toast"),C),a=v(b("wd-icon"),y),m=p,f=v(b("wd-input"),J),h=v(b("wd-button"),S),w=Q,x=v(b("wd-form"),N);return d(),I(j,null,[_(o),_(x,{model:E(c)},{default:n(()=>[_(m,{class:"flex items-center py-1.5 px-4 rounded-[60rpx] bg-lighter"},{default:n(()=>[_(a,{name:"user",size:"38rpx"}),_(m,{class:"w-[1px] h-[40rpx] mx-2.5 bg-light"}),_(f,{modelValue:E(c).account,"onUpdate:modelValue":t[0]||(t[0]=e=>E(c).account=e),maxlength:50,disabled:E(r),prop:"account",clearable:"","clear-trigger":"focus",placeholder:"请输入账号","placeholder-class":"!text-tx-placeholder"},null,8,["modelValue","disabled"])]),_:1}),_(m,{class:"flex items-center py-1.5 px-4 mt-4 rounded-[60rpx] bg-lighter"},{default:n(()=>[_(a,{name:"lock-on",size:"38rpx"}),_(m,{class:"w-[1px] h-[40rpx] mx-2.5 bg-light"}),_(f,{modelValue:E(c).password,"onUpdate:modelValue":t[1]||(t[1]=e=>E(c).password=e),maxlength:50,disabled:E(r),prop:"password",clearable:"","show-password":"","clear-trigger":"focus",placeholder:"请输入密码","placeholder-class":"!text-tx-placeholder"},null,8,["modelValue","disabled"])]),_:1}),e.showProtocol?(d(),u(m,{key:0,class:"mt-4 ml-2"},{default:n(()=>[_(Y,{modelValue:E(s),"onUpdate:modelValue":t[2]||(t[2]=e=>k(s)?s.value=e:null)},null,8,["modelValue"])]),_:1})):i("",!0),_(m,{class:"mt-4"},{default:n(()=>[_(h,{type:"primary",size:"large",block:"",loading:E(r),disabled:E(A),onClick:g},{default:n(()=>[B(" 登录 ")]),_:1},8,["loading","disabled"])]),_:1}),_(m,{class:"flex items-center justify-end gap-x-2 mt-4"},{default:n(()=>[e.showRegister?(d(),u(m,{key:0,class:"ml-1 text-sm text-primary",onClick:t[3]||(t[3]=e=>l.$go("/pages/login/register"))},{default:n(()=>[B(" 立即注册 ")]),_:1})):i("",!0),e.showRegister?(d(),u(m,{key:1,class:"text-tx-placeholder text-xs"},{default:n(()=>[B(" | ")]),_:1})):i("",!0),_(m,{class:"text-right text-sm text-primary mr-2"},{default:n(()=>[_(w,{onClick:t[4]||(t[4]=e=>l.$go("/pages/login/recover"))},{default:n(()=>[B("忘记密码?")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])],64)}}}),z=o({__name:"login-mobile",props:{showProtocol:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0}},setup(e){const l=e,t=f(),o=h(),s=w(!1),a=w(!1),r=x({mobile:"",code:""}),c=()=>r.mobile?r.code?l.showProtocol&&!s.value?(t.show("请阅读《服务协议》与《隐私协议》"),!1):(a.value=!0,void G.mobileLogin({mobile:r.mobile,code:r.code}).then(async e=>{await o.login(e.token),t.show("登录成功"),setTimeout(()=>{D({url:"/pages/user/index"}),a.value=!1},1e3)}).catch(()=>{setTimeout(()=>{a.value=!1},1500)})):(t.show("请输入验证码"),!1):(t.show("请输入手机号"),!1);return(l,t)=>{const o=v(b("wd-toast"),C),A=p,g=v(b("wd-input"),J),m=v(b("w-verify-code"),K),f=v(b("wd-button"),S),h=v(b("wd-form"),N);return d(),I(j,null,[_(o),_(h,{ref:"form",model:E(r)},{default:n(()=>[_(A,{class:"flex items-center py-1.5 px-4 rounded-[60rpx] bg-lighter"},{default:n(()=>[_(A,null,{default:n(()=>[B("+86")]),_:1}),_(A,{class:"w-[1px] h-[40rpx] mx-2.5 bg-light"}),_(g,{modelValue:E(r).mobile,"onUpdate:modelValue":t[0]||(t[0]=e=>E(r).mobile=e),prop:"mobile",type:"number",clearable:"",placeholder:"请输入手机号码","placeholder-class":"!text-tx-placeholder"},null,8,["modelValue"])]),_:1}),_(A,{class:"flex items-center py-1.5 px-4 mt-4 rounded-[60rpx] bg-lighter"},{default:n(()=>[_(g,{modelValue:E(r).code,"onUpdate:modelValue":t[1]||(t[1]=e=>E(r).code=e),prop:"code",type:"number",clearable:"",placeholder:"请输入验证码","placeholder-class":"!text-tx-placeholder"},null,8,["modelValue"]),_(A,{class:"w-[1px] h-[40rpx] mx-2.5 bg-light"}),_(m,{type:"mobile",mobile:E(r).mobile,scene:E(T).LOGIN},null,8,["mobile","scene"])]),_:1}),e.showProtocol?(d(),u(A,{key:0,class:"mt-4 ml-2"},{default:n(()=>[_(Y,{modelValue:E(s),"onUpdate:modelValue":t[2]||(t[2]=e=>k(s)?s.value=e:null)},null,8,["modelValue"])]),_:1})):i("",!0),_(A,{class:"mt-4"},{default:n(()=>[_(f,{type:"primary",size:"large",disabled:E(a)||!E(r).mobile||!E(r).code,loading:E(a),block:"",onClick:c},{default:n(()=>[B(" 登录 ")]),_:1},8,["disabled","loading"])]),_:1}),e.showRegister?(d(),u(A,{key:1,class:"text-xs text-center text-tx-placeholder mt-4"},{default:n(()=>[B(" 若手机号未注册，登录后会自动注册 ")]),_:1})):i("",!0)]),_:1},8,["model"])],64)}}}),Z=m(o({__name:"index",setup(e){const l=V(),t=h(),o=a(()=>{var e;return null==(e=l.getLoginConfig.basis)?void 0:e.logo}),s=a(()=>{var e;return null==(e=l.getLoginConfig.basis)?void 0:e.tips}),r=w(!1),c=w(!0),A=a(()=>{var e,t,o,s,a,u;const d=l.getLoginConfig;switch(O.fetchClient()){case X.H5:return c.value=null==(e=d.h5)?void 0:e.is_agreement,r.value=0===(null==(t=d.h5)?void 0:t.usable_channel.length),d.h5||{};case X.MP_WEIXIN:case X.OA_WEIXIN:return c.value=null==(o=d.wx)?void 0:o.is_agreement,r.value=0===(null==(s=d.wx)?void 0:s.usable_channel.length),d.wx||{};default:return c.value=null==(a=d.other)?void 0:a.is_agreement,r.value=0===(null==(u=d.other)?void 0:u.usable_channel.length),d.other||{}}});return M(()=>{t.isLogin&&D({url:"/pages/index/index"})}),(e,l)=>{const t=p,a=v(b("w-widget-bar"),F),g=v(b("wd-img"),R),m=v(b("wd-divider"),W),f=P("global-ku-root");return d(),u(f,null,{default:n(()=>[E(r)?(d(),u(t,{key:0,class:"flex-1 flex items-center justify-center"},{default:n(()=>[_(H,{message:"登录渠道尚未开放"})]),_:1})):(d(),u(t,{key:1,class:"login flex-1 flex flex-col bg-page"},{default:n(()=>{var e;return[_(a),_(t,{class:"flex-1 flex flex-col items-center mt-10"},{default:n(()=>[_(g,{width:"180rpx",height:"180rpx",src:E(o)},null,8,["src"]),_(t,{class:"text-xl text-tx-secondary tracking-[0.3em] mt-6"},{default:n(()=>[B(U(E(s)),1)]),_:1}),_(t,{class:"w-full px-10 mt-10"},{default:n(()=>["account"===E(A).default_method?(d(),u(q,{key:0,"show-register":E(A).usable_register.includes("account"),"show-protocol":E(c)},null,8,["show-register","show-protocol"])):i("",!0),"mobile"===E(A).default_method?(d(),u(z,{key:1,"show-register":E(A).usable_register.includes("mobile"),"show-protocol":E(c)},null,8,["show-register","show-protocol"])):i("",!0),"wx"===E(A).default_method?(d(),u(L,{key:2,"show-protocol":E(c)},null,8,["show-protocol"])):i("",!0)]),_:1})]),_:1}),(null==(e=E(A).usable_channel)?void 0:e.length)>=2?(d(),u(t,{key:0,class:"text-center mt-4 mb-8"},{default:n(()=>[_(t,{class:"px-12 mb-4"},{default:n(()=>[_(m,{color:"var(--text-color-placeholder)","custom-class":"!text-xs"},{default:n(()=>[B(" 其它登录方式 ")]),_:1})]),_:1}),_(t,{class:"flex justify-center gap-x-8"},{default:n(()=>[E(A).usable_channel.includes("wx")&&"wx"!==E(A).default_method?(d(),u(t,{key:0,class:"w-[80rpx] h-[80rpx] rounded-full bg-lighter",onClick:l[0]||(l[0]=e=>E(A).default_method="wx")},{default:n(()=>[_(g,{src:E("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAM1BMVEUAAABGzF+268AoxEX8/vwox0gow0YoxEXu+vAow0Rr1n8oxUXX9N0oxEWS4aEoxEX///8C+QiGAAAAD3RSTlMA47/f4yCAv89Az2DDn8NgGXPHAAAEHUlEQVR42sVbWbLjIAyM2M0m7n/aqVdTNZrngFlEQv8lH+l2qwER8GsV+grBGJNSMiGES7++B22MxTdImVK4Xp+GJu4qZAo8gg47jkAahhEsdoLc7oOROAeZrkP0BHlt9f6YBIMcSM19fIs8SMN3/5yEC/fA6gPV54eRqn+kDGT/oTIE3A2pJ8t/VEFiMfFXKIufgTSn+EnBWX6aEPj54yvgjz/+WODPP/sVaPw87KEAEsxJfgoiPwD7Y6DxW7CHCkAIiwUAIaJTpRSlXBSeUYSaANklL3eouCoizU7BEEsdSsCekaAf6V1pQ0XYkcO0QE8u4DyuYQNE6UMJrgVp7fEJgmlBk7+MQgHHgsTgJwUMC1j8pGDZgsDhJyicguyuAq5MIq6uCFhFvj1fRY9yjjEW7PMsDG8/DeJGn3++VIWg/FIMZacA9GjxF39FqMMZmKcI+vI/al+KmlI/FcO6gMrDulpZMlZtmYF+mIWqAyzXHFBlyQIKwcgQiOT2PXGesSgkqkBvDoj+fWFSgvjXYijbg7Ay5kvpfKmUi9HJqRq0IzAH5ag1mxUge4Owj78NMvgshIgxZz8sxvQz2IeDH3bhVvpl29oO5Cl6EKvNqmwNAjHsfpWebOgLMMjIgPIds0R/LkwMAQoQHK9NuhrNCAw+v+d27KHVDanSB/E/QjwLkMvtmEfg7xkMCZgdh5H4GQpIwHQIJppW5R8EYAOxPCNj3tGwp9VNmUL8nXWf1a/PkN1IERKVYC6G+bdF930s3P7UUL4tYM0CwPeUeQro2y+IxxDOD4RYaw/hTjeQAkMT0VQOc60XFu+fCX5yJqSiNirwvCg6uC+S4knAfAwQyiRcS4DBB4BqCfBlz95dvwIuKHCYNwno/kMLoj4IRJkFNARoXFDg+AJoa4Q9qJoAX2aBLQG2w++rBfV7/r4JAweFsSoA9gjQA+cEqt4NuTKH3MhgP4X/1lfI0ZEAsSkC3RDkX60tgM9ZCAEImyLQDYFqzeNuwyygBw6LmstI5huAA4clWWALjm1AYp3XdVPQbwYu5omp4O4LuHeWQLBaAUzsWxMQOfyo+afG4Bj8dsexMYj1M4Sw5+Deq9V96cjJOd8E/2QA1wLK4ooDWy8PgHCzEQy7r29AJh+UEh5BPG7Md9+foNXaA5XmYUv2nRsk4Bo1sF+7RJZd59iWoCV+AvJhFWDkkAfJu8nHx8W6SsyHOXKZjmAZ1xk3BuBQDCgAx2IQOHfa9wfwe/MRzUBnFNAAOKOA+M8oIP+PKjCvcei0nz+wXvDh4zrwjg3zjSstD8TvVoZD9hPCFhOsPvqymbzOvm5nXmwEy6An93kSDtDzC2F2v/UreW8U8aGvNMyuX5+BDsn2yG3/vWu+CD45vxwhJWul/KGV0tpkwiL3H9Yl6toCsZ1hAAAAAElFTkSuQmCC"),width:"100%",height:"100%"},null,8,["src"])]),_:1})):i("",!0),E(A).usable_channel.includes("mobile")&&"mobile"!==E(A).default_method?(d(),u(t,{key:1,class:"w-[80rpx] h-[80rpx] rounded-full bg-lighter",onClick:l[1]||(l[1]=e=>E(A).default_method="mobile")},{default:n(()=>[_(g,{src:E("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAM1BMVEUAAACGav+Gaf+HaP+Fav+HbP+Hav+Fav+Gav/////h2v/Dtf/Rx/+0ov+Vff/w7P+kj/9mJ7pRAAAACHRSTlMA378ggECfYOaZY98AAAKVSURBVHja7ZvdkpswDEb1YwslUML7P21npxfqlG5ANvCxs3tuMxOfyLKTIImaUB2KiTC7OzOLWBkqXYNqEf8/LOVsi9XiK5jtNAktvo9THLSwJ+Cip314QBjUvImDFFS8Ga4XB3+NKXVRvBcu1E5lDwD7UDwABEHFD4O1IfweIIJQ/GCSBuIONRA/AQGk3yoVQeuHQXJ9jIH4iTBo/UBA6wd25f2Tvw+qX0ClT1G/AlZMAgQCSoCgdCXA8utzlmVO/UbKb8A8vR7vmfYocOsGjI8djI2b4Ns8H7sY55aTYJnP3x8Da8jA+bGbOX8dSccGrHnm8rA/AP0hkGwG9GeBZO+g6fHBa9zgz0ZNnguB+TY733mMJEgcBEcIsEYAIAIe1yFjBDhSECIQaWgYgUhDhgjEHgwOEYg9MIxAnAPGCMR17BCBSIIBIxBJUDACkQSGEYgkcKQAowVcqWIFKg1YgYEKVqCQYQWE5NsLMFaAfwTIsQKOF+BvLnCDJIRfRHABwwoY/uu4YgUGtICSogUIK0BEghSwO/w1qw7+c6pIgXhOjHxAUXACFo8JkQ+pSBIC22QEol6GEbAoGUMEomIgIIGoWWIELMr2GAFtKdkEz/kvpgYBS3YurNZ49+KUCkC+bLcW6C3eVt9kSQgkCpeJEPzbOfAKVi/l+zg0EYJtFt+k3q18nzsI/ZeA0orBtxlfJ7ZwqPg2y+FNLPk+quVdH8/su6j3bGQiRbdykbJfgd63nQ/f0HiBgaCaemN9qIFQgDgKTAQ1YCWogfTO9vSvDzWQrzXi0T9j1D9rpIIJf6AFFP5AGRP+QI8adsMplC8/8PiBGmD5/o04fO5W0qkHGT1eDx1fHQc+e/5cK3L4PSwOG///DbySmsWJVlWRAAAAAElFTkSuQmCC"),width:"100%",height:"100%"},null,8,["src"])]),_:1})):i("",!0),E(A).usable_channel.includes("account")&&"account"!==E(A).default_method?(d(),u(t,{key:2,class:"w-[80rpx] h-[80rpx] rounded-full bg-lighter",onClick:l[2]||(l[2]=e=>E(A).default_method="account")},{default:n(()=>[_(g,{src:E("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAM1BMVEUAAADsZCTylGjsYyPvaCjveULrZCTrZCT//fz98+74yrTsYyP1sJD749fsZSXsZCT///9vWlTwAAAAD3RSTlMAv8/fIONAgOPPv5/Dw2ABBxtoAAADvklEQVR42tWb21LtIAyGG1LKqRTe/2n3xRo3S0eaQ0H0v3N0zNfkD7QcNpX2/XIJALGUgogAKV3H9jPaDwfleyGk2RR7C94RopsGsbvCE6ZjRnQsAqHbx4ZPRax0LArfhGMQdihq4bEofFN66AVXngrdk8fH0rSgDq4MkptcfVqocMJRRgqdOv2LygBluNKi+E24wH6EFdXx9QTC+GsIoEwULorfhGvj093oynQ5Yvydr+OmAcpPCPc1BmjCRQZockMMYE0MoVbvQz7VNtAXwIT6Jp/N8yI4SXhfv8qLENyjDrChfqco6wR9AUztyFs+QdI78KxdeaP3Icif30djS7HWxKDIARAJIOOH91jnB0IQpECXgF6yo9iJoEpA7j6o9dIiHIoE2Ba/97usSkFh6lVqf9ce3ihScMkcYG7xYpEPhygZAvpON8JGQKUFLVEheScmdgWIALFViKUkrIClbG6EJkCBBdv/PynCKK1Bkk1DJ1WjXIR9gGwAssS+tYFgLCrjAIIwA0hYQAxg2h/wTZAGApQzBPG7IegBnguaB/ldYAjZIjOB+GWYlo9sCPZEYKOvAvnIduH18OkfvqNfm1PGpwlOXhsk9iw0JQfA6sJQdQSjAExV6uQAICsB01KADICzqmWGAMTbh7xNT2YAFFK5P9qY11JNFyAUUgwATz6ejXoTMErQry/tk4kAhuVUhgdABxAJq84FaO6y52nbdKEAACXA+RY0vxCiEiCpAF4xw7vXrQogMabjbgfGzz8GDYBjvBF1Leg/t3vUAFxPAL5UJGsA9m1XA9gxABuqPRBaHDUA58OkOwycn5vSKwCAs0zff93LDUfZhomzQtQfiW18+wTIGoCLs1FwO89a02ZtBUBbJn08GWXNZJRYezWVQxCrHuBQAfg44IXkYO0W1Y6yJb7caADeQmXtyedWfhVA4i3V1r4s9eXIXC6HRQBtz3INwMXctPR6AE/MhP8Fym/TSHw7ZsKCvBTE+51K62kAet8OtMsDPtcbWfbm7TFlfSAQCeCnQClDvIrwUzA3AfR4bP3wBRqgDjA8J/CGNwbwdi9tGJr/4uTH+M6Ra8WgOcZjTQ4sCO+joV5EfudBplaEyQLiLPl07b/3ON/6A43bPp0AVh3qbfGXEsDsaxX0NuFSAty3pQQovdm0oP6tG6fEX0rgNqEOHFr+Y+k1n5b+RWVwf/WqV0vC48dfhwB//sLjEwRce+sU9slXnvXXfvUMK6O3e+eEiKvfUyEQxMH1FFdKAID4cf3fXcrY/wA8a+1tu0r2ngAAAABJRU5ErkJggg=="),width:"100%",height:"100%"},null,8,["src"])]),_:1})):i("",!0)]),_:1})]),_:1})):i("",!0)]}),_:1}))]),_:1})}}}),[["__scopeId","data-v-8c19144d"]]);export{Z as default};
