import{ad as e,A as l,v as a,bw as s,y as o,x as r,bf as t,X as n,W as i,d as u,z as c,r as d,w as p,a5 as f,B as m,bn as y,c as h,g,k as _,D as v,E as b,a as w,l as x,h as k,L as S,m as C,C as $,s as I,t as j,aJ as V,aj as E,q as W}from"./index-4glTkX_N.js";import{C as q}from"./types.DQ6PHZfF.js";import{u as P}from"./useTranslate.By_X5Fzm.js";function T(){const{parent:a,index:s}=e(q);return{border:l(()=>a&&a.props.border&&s.value)}}const z=Symbol("wd-form"),B={...o,model:s(Object),rules:{type:Object,default:()=>({})},resetOnChange:a(!0),errorType:{type:String,default:"message"}},L=W(u({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...o,customInputClass:r(""),customLabelClass:r(""),placeholder:String,placeholderStyle:String,placeholderClass:r(""),cursorSpacing:i(0),cursor:i(-1),selectionStart:i(-1),selectionEnd:i(-1),adjustPosition:a(!0),holdKeyboard:a(!1),confirmType:r("done"),confirmHold:a(!1),focus:a(!1),type:r("text"),maxlength:{type:Number,default:-1},disabled:a(!1),alwaysEmbed:a(!1),alignRight:a(!1),modelValue:n(""),showPassword:a(!1),clearable:a(!1),readonly:a(!1),prefixIcon:String,suffixIcon:String,showWordLimit:a(!1),label:String,labelWidth:r(""),size:String,error:a(!1),center:a(!1),noBorder:a(!1),required:a(!1),prop:String,rules:t(),clearTrigger:r("always"),focusWhenClear:a(!0),ignoreCompositionEvent:a(!0),inputmode:r("text"),markerSide:r("before")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(a,{emit:s}){const o=a,r=s,t=c(),{translate:n}=P("input"),i=d(!1),u=d(!1),W=d(!1),q=d(!1),B=d(function(){const e=function(e){const{maxlength:l}=o;if(f(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(o.modelValue);l=e,a=o.modelValue,y(String(l),String(a))||r("update:modelValue",e);var l,a;return e}()),L=T();p(()=>o.focus,e=>{W.value=e},{immediate:!0,deep:!0}),p(()=>o.modelValue,e=>{B.value=f(e)?String(e):""});const{parent:O}=e(z),A=l(()=>f(o.placeholder)?o.placeholder:n("placeholder")),H=l(()=>{const{disabled:e,readonly:l,clearable:a,clearTrigger:s}=o;return!(!a||l||e||!B.value||!("always"===s||"focus"===o.clearTrigger&&q.value))}),K=l(()=>{const{disabled:e,readonly:l,maxlength:a,showWordLimit:s}=o;return Boolean(!e&&!l&&f(a)&&a>-1&&s)}),M=l(()=>O&&o.prop&&O.errorMessages&&O.errorMessages[o.prop]?O.errorMessages[o.prop]:""),F=l(()=>{let e=!1;if(O&&O.props.rules){const l=O.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===o.prop&&Array.isArray(l[a])&&(e=l[a].some(e=>e.required))}return o.required||o.rules.some(e=>e.required)||e}),R=l(()=>`wd-input  ${o.label||t.label?"is-cell":""} ${o.center?"is-center":""} ${L.border.value?"is-border":""} ${o.size?"is-"+o.size:""} ${o.error?"is-error":""} ${o.disabled?"is-disabled":""}  ${B.value&&String(B.value).length>0?"is-not-empty":""}  ${o.noBorder?"is-no-border":""} ${o.customClass}`),D=l(()=>`wd-input__label ${o.customLabelClass}`),G=l(()=>`wd-input__placeholder  ${o.placeholderClass}`),J=l(()=>o.labelWidth?m({"min-width":o.labelWidth,"max-width":o.labelWidth}):"");function N(){i.value=!i.value}async function U(){q.value=!1,B.value="",o.focusWhenClear&&(u.value=!0,W.value=!1),await E(),o.focusWhenClear&&(W.value=!0,q.value=!0),r("update:modelValue",B.value),r("clear")}async function X(){await E(150),u.value?u.value=!1:(q.value=!1,r("blur",{value:B.value}))}function Q({detail:e}){q.value=!0,r("focus",e)}function Y({detail:e}){r("update:modelValue",B.value),r("input",e)}function Z({detail:e}){r("keyboardheightchange",e)}function ee({detail:e}){r("confirm",e)}function le(){r("clicksuffixicon")}function ae(){r("clickprefixicon")}function se(e){r("click",e)}return(e,l)=>{const a=S,s=_,r=V;return g(),h(s,{class:b(R.value),style:v(e.customStyle),onClick:se},{default:w(()=>[e.label||e.$slots.label?(g(),h(s,{key:0,class:b(D.value),style:v(J.value)},{default:w(()=>[F.value&&"before"===e.markerSide?(g(),h(a,{key:0,class:"wd-input__required wd-input__required--left"},{default:w(()=>[C("*")]),_:1})):x("",!0),e.prefixIcon||e.$slots.prefix?(g(),h(s,{key:1,class:"wd-input__prefix"},{default:w(()=>[e.prefixIcon&&!e.$slots.prefix?(g(),h(I,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ae},null,8,["name"])):$(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):x("",!0),k(s,{class:"wd-input__label-inner"},{default:w(()=>[e.label&&!e.$slots.label?(g(),h(a,{key:0},{default:w(()=>[C(j(e.label),1)]),_:1})):e.$slots.label?$(e.$slots,"label",{key:1},void 0,!0):x("",!0)]),_:3}),F.value&&"after"===e.markerSide?(g(),h(a,{key:2,class:"wd-input__required"},{default:w(()=>[C("*")]),_:1})):x("",!0)]),_:3},8,["class","style"])):x("",!0),k(s,{class:"wd-input__body"},{default:w(()=>[k(s,{class:"wd-input__value"},{default:w(()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?x("",!0):(g(),h(s,{key:0,class:"wd-input__prefix"},{default:w(()=>[e.prefixIcon&&!e.$slots.prefix?(g(),h(I,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:ae},null,8,["name"])):$(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})),k(r,{class:b(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",K.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!i.value,modelValue:B.value,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value=e),placeholder:A.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:W.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":G.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:Y,onFocus:Q,onBlur:X,onConfirm:ee,onKeyboardheightchange:Z},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),o.readonly?(g(),h(s,{key:1,class:"wd-input__readonly-mask"})):x("",!0),H.value||e.showPassword||e.suffixIcon||K.value||e.$slots.suffix?(g(),h(s,{key:2,class:"wd-input__suffix"},{default:w(()=>[H.value?(g(),h(I,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:U})):x("",!0),e.showPassword?(g(),h(I,{key:1,"custom-class":"wd-input__icon",name:i.value?"view":"eye-close",onClick:N},null,8,["name"])):x("",!0),K.value?(g(),h(s,{key:2,class:"wd-input__count"},{default:w(()=>[k(a,{class:b([B.value&&String(B.value).length>0?"wd-input__count-current":"",String(B.value).length>e.maxlength?"is-error":""])},{default:w(()=>[C(j(String(B.value).length),1)]),_:1},8,["class"]),C(" /"+j(e.maxlength),1)]),_:1})):x("",!0),e.suffixIcon&&!e.$slots.suffix?(g(),h(I,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:le},null,8,["name"])):$(e.$slots,"suffix",{key:4},void 0,!0)]),_:3})):x("",!0)]),_:3}),M.value?(g(),h(s,{key:0,class:"wd-input__error-message"},{default:w(()=>[C(j(M.value),1)]),_:1})):x("",!0)]),_:3})]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-921fb1ee"]]);export{z as F,L as _,B as f,T as u};
