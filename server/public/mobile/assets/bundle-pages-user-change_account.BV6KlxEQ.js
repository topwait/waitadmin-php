import{d as a,G as e,H as t,r as s,I as l,A as o,w as r,c as u,a as n,b as d,e as c,f as p,g as i,h as m,k as f,j as _,E as b,l as g,m as v,t as x,S as h,a$ as w,q as y}from"./index-4glTkX_N.js";import{_ as j}from"./wd-input.DYf8A7Ki.js";import{_ as k}from"./wd-button.Bm4eyLOH.js";import{_ as I}from"./wd-form.vue_vue_type_script_setup_true_lang.7ThkrgxC.js";import"./types.DQ6PHZfF.js";import"./index.mNFG9pMF.js";import"./index.D9GroqTO.js";import"./useTranslate.By_X5Fzm.js";const z=y(a({__name:"change_account",setup(a){const y=e(),z=t(),A=s(!1),T=l({account:z.userInfo.account||""}),V=s(!1),E=s(""),U=o(()=>A.value||!!E.value||!T.account),$=async()=>{const a=z.userInfo.account;if(T.account===a)return y.show("与原账号一致,无需修改"),!1;A.value=!0,await h.edit({scene:"account",value:T.account}).then(async()=>{y.show("修改成功"),await z.getUser(),setTimeout(()=>{w()},500)}).catch(()=>{}).finally(()=>{setTimeout(()=>{A.value=!1},800)})};return r(()=>T.account,a=>{a?/^[a-zA-Z0-9]+$/.test(a)?a.length<=1||a.length>20?E.value="账号长度不合法，应为2-20个字符":E.value="":E.value="账号只能包含字母或数字":E.value="账号不能为空"}),(a,e)=>{const t=c(p("wd-input"),j),s=f,l=c(p("wd-button"),k),o=c(p("wd-form"),I),r=d("global-ku-root");return i(),u(r,null,{default:n(()=>[m(s,{class:"flex-1 p-6 pt-10 border-t border-br-thinned bg-page"},{default:n(()=>[m(o,{ref:"form",model:_(T),class:"w-full"},{default:n(()=>[m(s,{class:b(["p-3.5 rounded-xl bg-lighter border-2",_(E)?"border-danger":_(V)?"border-primary":"border-transparent"])},{default:n(()=>[m(t,{modelValue:_(T).account,"onUpdate:modelValue":e[0]||(e[0]=a=>_(T).account=a),disabled:_(A),"no-border":!0,prop:"nickname",type:"text",placeholder:"请输入账号","custom-class":"!bg-transparent",onFocus:e[1]||(e[1]=a=>V.value=!0),onBlur:e[2]||(e[2]=a=>V.value=!1)},null,8,["modelValue","disabled"])]),_:1},8,["class"]),m(s,{class:"pt-2 pl-3 text-sm text-danger h-4.5"},{default:n(()=>[_(E)?(i(),u(s,{key:0},{default:n(()=>[v(x(_(E)),1)]),_:1})):g("",!0)]),_:1}),m(s,{class:"mt-8 px-2 text-sm text-tx-placeholder"},{default:n(()=>[v(" 账号只能包含字母或数字，并且长度2~20个字符内容。 ")]),_:1}),m(s,{class:"mt-4"},{default:n(()=>[m(l,{type:"primary",size:"large",block:!0,loading:_(A),disabled:_(U),onClick:$},{default:n(()=>[v(" 确定 ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-2ddf3ca0"]]);export{z as default};
