import{d as t,H as e,I as s,r as a,R as o,O as i,c as u,a as n,b as r,e as p,K as l,f as d,S as c,g as _,h as m,k as g,m as x,t as j,j as w}from"./index-CbP45Wwt.js";import"./types.DuL_ynPZ.js";import"./index.CDE1r9Ff.js";import"./index.D9GroqTO.js";import{w as f,_ as v}from"./login-wechat.vue_vue_type_script_setup_true_lang.5896Lj9u.js";import"./wd-button.VA8QVjvr.js";import"./wd-form.vue_vue_type_script_setup_true_lang.DscUGWD7.js";import"./wd-input.BHaKXBII.js";import"./useTranslate.BahM4N0k.js";import"./notice.4Vk_mI8L.js";import"./wd-popup.C0DdTWGY.js";import"./auth-protocol.vue_vue_type_script_setup_true_lang.DCutcNGz.js";import"./wd-checkbox.4avEtivn.js";const y=t({__name:"oauth",setup(t){const y=e(),h=s(),b=a(!1),k=a(""),T=a("正在登录中...");return o(async t=>{if(!h.isLogin)return(null==t?void 0:t.code)&&(null==t?void 0:t.state)?void(await(async(t,e)=>{t&&e&&f.authLogin(t,e).then(async t=>{1===t.code?(T.value="请完成手机号绑定...",k.value=t.data.sign,b.value=!0):(await h.login(t.token),y.show("登录成功"),setTimeout(()=>{i({url:"/pages/user/index"})},1e3))})})(t.code,t.state)):(y.error("授权异常，为您跳转首页~"),setTimeout(()=>{i({url:"/pages/index/index"})},1500));await i({url:"/pages/index/index"})}),(t,e)=>{const s=p(d("wd-toast"),l),a=p(d("wd-loading"),c),o=g,i=r("global-ku-root");return _(),u(i,null,{default:n(()=>[m(s),m(o,{class:"flex-1 flex items-center justify-center bg-page"},{default:n(()=>[m(o,{class:"text-center"},{default:n(()=>[m(a,{type:"outline",size:"100rpx"}),m(o,{class:"mt-3 text-tx-secondary"},{default:n(()=>[x(j(w(T)),1)]),_:1})]),_:1}),m(v,{scene:"bind","show-popup":w(b),sign:w(k)},null,8,["show-popup","sign"])]),_:1})]),_:1})}}});export{y as default};
