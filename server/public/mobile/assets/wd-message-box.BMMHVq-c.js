import{b8 as t,r as e,b9 as o,ba as a,y as s,v as n,x as l,d as r,A as u,I as i,bb as c,bc as p,a5 as d,bd as m,w as f,c as w,g as h,a as _,h as b,k as y,E as x,l as C,m as B,t as g,n as V,C as k,F as z,j as P,ar as v,be as E,q as T}from"./index-4glTkX_N.js";import{w as I}from"./wd-popup.DsWtaoA5.js";import{_ as M}from"./wd-button.Bm4eyLOH.js";import{_ as O}from"./wd-input.DYf8A7Ki.js";import{u as $}from"./useTranslate.By_X5Fzm.js";const S="__MESSAGE_OPTION__",j=Symbol("None"),R={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function G(s=""){const n=s?S+s:S,l=t(n,e(j));l.value===j&&(l.value=R,a(n,l));const r=t=>e=>{const a=o({type:t},"string"==typeof e?{title:e}:e);return"confirm"===a.type||"prompt"===a.type?a.showCancelButton=!0:a.showCancelButton=!1,u(a)},u=t=>new Promise((e,a)=>{const s=o(R,"string"==typeof t?{title:t}:t);l.value=o(s,{show:!0,success:t=>{d(),e(t)},fail:t=>{d(),a(t)}})}),i=r("alert"),c=r("confirm"),p=r("prompt"),d=()=>{l.value!==j&&(l.value.show=!1)};return{show:u,alert:i,confirm:c,prompt:p,close:d}}const N=T(r({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...s,selector:l(""),rootPortal:n(!1)},setup(o){const a=o,{translate:s}=$("message-box"),n=u(()=>`wd-message-box__container ${a.customClass}`),l=u(()=>`wd-message-box__body ${G.title?"":"is-no-title"} ${"prompt"===G.type?"is-prompt":""}`),r=(T=a.selector)?`${S}${T}`:S;var T;const j=t(r,e(R)),G=i({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),N=u(()=>{const t=c({block:!0},d(G.confirmButtonProps)?p(G.confirmButtonProps,m):{});return t.customClass=`${t.customClass||""} wd-message-box__actions-btn`,t}),A=u(()=>{const t=c({block:!0,type:"info"},d(G.cancelButtonProps)?p(G.cancelButtonProps,m):{});return t.customClass=`${t.customClass||""} wd-message-box__actions-btn`,t});function U(t){if(("modal"!==t||G.closeOnClickModal)&&("prompt"!==G.type||"confirm"!==t||function(){if(G.inputPattern&&!G.inputPattern.test(String(G.inputValue)))return G.showErr=!0,!1;if("function"==typeof G.inputValidate){if(!G.inputValidate(G.inputValue))return G.showErr=!0,!1}return G.showErr=!1,!0}()))switch(t){case"confirm":G.beforeConfirm?G.beforeConfirm({resolve:e=>{e&&q({action:t,value:G.inputValue})}}):q({action:t,value:G.inputValue});break;case"cancel":F({action:t});break;default:F({action:"modal"})}}function q(t){G.show=!1,E(G.success)&&G.success(t)}function F(t){G.show=!1,E(G.fail)&&G.fail(t)}function H({value:t}){""!==t?G.inputValue=t:G.showErr=!1}return f(()=>j.value,t=>{var e;(e=t)&&(G.title=d(e.title)?e.title:"",G.showCancelButton=!!d(e.showCancelButton)&&e.showCancelButton,G.show=e.show,G.closeOnClickModal=e.closeOnClickModal,G.confirmButtonText=e.confirmButtonText,G.cancelButtonText=e.cancelButtonText,G.msg=e.msg,G.type=e.type,G.inputType=e.inputType,G.inputSize=e.inputSize,G.inputValue=e.inputValue,G.inputPlaceholder=e.inputPlaceholder,G.inputPattern=e.inputPattern,G.inputValidate=e.inputValidate,G.success=e.success,G.fail=e.fail,G.beforeConfirm=e.beforeConfirm,G.inputError=e.inputError,G.showErr=e.showErr,G.zIndex=e.zIndex,G.lazyRender=e.lazyRender,G.confirmButtonProps=e.confirmButtonProps,G.cancelButtonProps=e.cancelButtonProps)},{deep:!0,immediate:!0}),f(()=>G.show,t=>{!1===!!t&&(G.showErr=!1)},{deep:!0,immediate:!0}),(t,e)=>{const o=y;return h(),w(o,null,{default:_(()=>[b(I,{transition:"zoom-in",modelValue:G.show,"onUpdate:modelValue":e[3]||(e[3]=t=>G.show=t),"close-on-click-modal":G.closeOnClickModal,"lazy-render":G.lazyRender,"custom-class":"wd-message-box",onClickModal:e[4]||(e[4]=t=>U("modal")),"z-index":G.zIndex,duration:200,"root-portal":t.rootPortal},{default:_(()=>[b(o,{class:x(n.value)},{default:_(()=>[b(o,{class:x(l.value)},{default:_(()=>[G.title?(h(),w(o,{key:0,class:"wd-message-box__title"},{default:_(()=>[B(g(G.title),1)]),_:1})):C("",!0),b(o,{class:"wd-message-box__content"},{default:_(()=>["prompt"===G.type?(h(),V(z,{key:0},[b(O,{modelValue:G.inputValue,"onUpdate:modelValue":e[0]||(e[0]=t=>G.inputValue=t),type:G.inputType,size:G.inputSize,placeholder:G.inputPlaceholder,onInput:H},null,8,["modelValue","type","size","placeholder"]),G.showErr?(h(),w(o,{key:0,class:"wd-message-box__input-error"},{default:_(()=>[B(g(G.inputError||P(s)("inputNoValidate")),1)]),_:1})):C("",!0)],64)):C("",!0),k(t.$slots,"default",{},()=>[B(g(G.msg),1)],!0)]),_:3})]),_:3},8,["class"]),b(o,{class:x("wd-message-box__actions "+(G.showCancelButton?"wd-message-box__flex":"wd-message-box__block"))},{default:_(()=>[G.showCancelButton?(h(),w(M,v({key:0},A.value,{onClick:e[1]||(e[1]=t=>U("cancel"))}),{default:_(()=>[B(g(G.cancelButtonText||P(s)("cancel")),1)]),_:1},16)):C("",!0),b(M,v(N.value,{onClick:e[2]||(e[2]=t=>U("confirm"))}),{default:_(()=>[B(g(G.confirmButtonText||P(s)("confirm")),1)]),_:1},16)]),_:1},8,["class"])]),_:3},8,["class"])]),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index","root-portal"])]),_:3})}}}),[["__scopeId","data-v-6722d1fb"]]);export{N as _,G as u};
